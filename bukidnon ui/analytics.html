<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Bukidnon Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        * {
            scroll-behavior: smooth;
        }

        .nav-link {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-link:hover {
            transform: translateX(5px);
        }

        .chart-container {
            transition: all 0.3s ease;
            max-height: 220px;
        }

        .chart-container:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        /* Fix chart sizing */
        .chart-wrapper {
            position: relative;
            height: 200px;
            width: 100%;
        }

        /* Small doughnut chart */
        .small-doughnut {
            max-width: 180px;
            max-height: 180px;
            margin: 0 auto;
        }

        /* Compact table */
        .compact-table {
            font-size: 0.85rem;
        }

        .compact-table th,
        .compact-table td {
            padding: 0.5rem 0.75rem;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen flex">
    <!-- Sidebar -->
    <aside class="w-72 bg-gradient-to-b from-green-700 to-green-800 text-white p-6 flex flex-col shadow-2xl">
        <div class="mb-10 text-center">
            <img src="img/bukidnon_logo.png" alt="Bukidnon Logo" class="w-28 h-28 object-contain rounded-full mx-auto border-4 border-white shadow-lg">
            <h2 class="mt-4 text-xl font-bold">Bukidnon Admin</h2>
            <p class="text-green-200 text-sm">Management Portal</p>
        </div>

        <nav class="flex-grow space-y-2">
            <a href="dashboard.html" class="nav-link flex items-center gap-3 text-white hover:bg-green-600 px-4 py-3 rounded-lg hover:pl-6">
                <i class="fas fa-tachometer-alt text-lg"></i>
                <span class="font-medium">Dashboard</span>
            </a>
            <a href="users.html" class="nav-link flex items-center gap-3 text-white hover:bg-green-600 px-4 py-3 rounded-lg hover:pl-6">
                <i class="fas fa-users text-lg"></i>
                <span class="font-medium">Users</span>
            </a>
            <a href="analytics.html" class="nav-link flex items-center gap-3 bg-green-600 px-4 py-3 rounded-lg hover:bg-green-500 hover:pl-6">
                <i class="fas fa-chart-line text-lg"></i>
                <span class="font-medium">Analytics</span>
            </a>
            <a href="upload-files.html" class="nav-link flex items-center gap-3 text-white hover:bg-green-600 px-4 py-3 rounded-lg hover:pl-6">
                <i class="fas fa-cloud-upload-alt text-lg"></i>
                <span class="font-medium">Upload Files</span>
            </a>
            <a href="settings.html" class="nav-link flex items-center gap-3 text-white hover:bg-green-600 px-4 py-3 rounded-lg hover:pl-6">
                <i class="fas fa-cogs text-lg"></i>
                <span class="font-medium">Settings</span>
            </a>
            <a href="roles.html" class="nav-link flex items-center gap-3 text-white hover:bg-green-600 px-4 py-3 rounded-lg hover:pl-6">
                <i class="fas fa-user-shield text-lg"></i>
                <span class="font-medium">Roles</span>
            </a>
        </nav>

        <div class="mt-auto pt-6 border-t border-green-600">
            <a href="login.html" class="flex items-center gap-3 text-white hover:bg-red-600 px-4 py-3 rounded-lg transition duration-300">
                <i class="fas fa-sign-out-alt text-lg"></i>
                <span class="font-medium">Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-6">
        <!-- Header -->
        <header class="bg-white shadow-sm rounded-lg mb-6">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center px-6 py-4">
                <div class="mb-4 md:mb-0">
                    <h1 class="text-2xl font-bold text-gray-900">Analytics & Reports</h1>
                    <p class="text-gray-500 text-sm mt-1">Monitor platform performance and user statistics</p>
                </div>

                <div class="flex items-center gap-6">
                    <div class="text-right hidden md:block">
                        <p class="font-semibold text-gray-800">John Doe</p>
                        <p class="text-sm text-gray-500">Administrator</p>
                    </div>
                    <div class="relative group">
                        <img src="uploads/default-profile.png" alt="Profile" 
                            class="w-12 h-12 rounded-full border-2 border-green-600 shadow-md object-cover cursor-pointer hover:opacity-90 transition-opacity">
                        <div class="absolute -bottom-1 -right-1 bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg pointer-events-none">
                            <i class="fas fa-camera text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Analytics Content -->
        <section class="page fade-in">
            <!-- Quick Stats Row -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500 mb-1">Total Users</p>
                            <h3 class="text-2xl font-bold text-gray-800">2,847</h3>
                            <p class="text-xs text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>8.5% growth
                            </p>
                        </div>
                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500 mb-1">Active Today</p>
                            <h3 class="text-2xl font-bold text-gray-800">342</h3>
                            <p class="text-xs text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>4% increase
                            </p>
                        </div>
                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center text-green-600">
                            <i class="fas fa-signal"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500 mb-1">Failed Logins</p>
                            <h3 class="text-2xl font-bold text-red-600">24</h3>
                            <p class="text-xs text-gray-500 mt-1">
                                <i class="fas fa-shield-alt mr-1"></i>Security
                            </p>
                        </div>
                        <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center text-red-600">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500 mb-1">Avg. Session</p>
                            <h3 class="text-2xl font-bold text-purple-600">45m</h3>
                            <p class="text-xs text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+5 mins
                            </p>
                        </div>
                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row - Compact -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Line Chart -->
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-semibold text-gray-800">User Growth (Last 6 Months)</h3>
                        <select class="text-xs border rounded px-2 py-1 bg-gray-50">
                            <option>Last 6 months</option>
                            <option>Last 30 days</option>
                        </select>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="usersGrowthChart" class="w-full h-full"></canvas>
                    </div>
                </div>

                <!-- Doughnut Chart - Compact -->
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-semibold text-gray-800">User Status</h3>
                        <span class="text-xs text-gray-500">Total: 2,847</span>
                    </div>
                    <div class="small-doughnut">
                        <canvas id="statusDistributionChart"></canvas>
                    </div>
                    <div class="grid grid-cols-3 gap-2 mt-3 text-center">
                        <div>
                            <span class="inline-block w-3 h-3 rounded-full bg-green-500 mr-1"></span>
                            <span class="text-xs text-gray-600">Active</span>
                            <div class="text-sm font-semibold">2,000</div>
                        </div>
                        <div>
                            <span class="inline-block w-3 h-3 rounded-full bg-red-500 mr-1"></span>
                            <span class="text-xs text-gray-600">Inactive</span>
                            <div class="text-sm font-semibold">500</div>
                        </div>
                        <div>
                            <span class="inline-block w-3 h-3 rounded-full bg-yellow-500 mr-1"></span>
                            <span class="text-xs text-gray-600">Pending</span>
                            <div class="text-sm font-semibold">347</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bar Charts Row -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Login Activity -->
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-semibold text-gray-800">Weekly Logins</h3>
                        <span class="text-xs text-gray-500">Last 7 days</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="weeklyLoginsChart"></canvas>
                    </div>
                </div>

                <!-- Page Views -->
                <div class="bg-white rounded-lg shadow p-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-semibold text-gray-800">Top Pages</h3>
                        <span class="text-xs text-gray-500">Views per page</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="pageViewsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Detailed Report -->
            <div class="bg-white rounded-lg shadow">
                <div class="p-4 border-b">
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between">
                        <h3 class="text-sm font-semibold text-gray-800 mb-2 sm:mb-0">Activity Report</h3>
                        <div class="flex items-center gap-2">
                            <button class="text-xs px-3 py-1 border rounded hover:bg-gray-50">
                                <i class="fas fa-download mr-1"></i>Export
                            </button>
                            <button class="text-xs px-3 py-1 bg-green-600 text-white rounded hover:bg-green-500">
                                <i class="fas fa-file-csv mr-1"></i>CSV
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full compact-table">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">New Users</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Active</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Logins</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Failed</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Duration</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <tr class="hover:bg-gray-50">
                                <td class="px-4 py-2 font-medium text-sm">Dec 1, 2024</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded">+12</span></td>
                                <td class="px-4 py-2">2,847</td>
                                <td class="px-4 py-2">342</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">8</span></td>
                                <td class="px-4 py-2">45m 32s</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-4 py-2 font-medium text-sm">Nov 30, 2024</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded">+15</span></td>
                                <td class="px-4 py-2">2,835</td>
                                <td class="px-4 py-2">298</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">5</span></td>
                                <td class="px-4 py-2">42m 15s</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-4 py-2 font-medium text-sm">Nov 29, 2024</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded">+8</span></td>
                                <td class="px-4 py-2">2,820</td>
                                <td class="px-4 py-2">315</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">12</span></td>
                                <td class="px-4 py-2">48m 45s</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-4 py-2 font-medium text-sm">Nov 28, 2024</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded">+22</span></td>
                                <td class="px-4 py-2">2,812</td>
                                <td class="px-4 py-2">287</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">3</span></td>
                                <td class="px-4 py-2">43m 20s</td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-4 py-2 font-medium text-sm">Nov 27, 2024</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded">+18</span></td>
                                <td class="px-4 py-2">2,790</td>
                                <td class="px-4 py-2">301</td>
                                <td class="px-4 py-2"><span class="px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded">6</span></td>
                                <td class="px-4 py-2">46m 10s</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="p-4 border-t">
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-600">Showing 1 to 5 of 50 entries</div>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 border rounded text-sm hover:bg-gray-50">← Previous</button>
                            <button class="px-3 py-1 border rounded text-sm bg-green-600 text-white hover:bg-green-500">1</button>
                            <button class="px-3 py-1 border rounded text-sm hover:bg-gray-50">2</button>
                            <button class="px-3 py-1 border rounded text-sm hover:bg-gray-50">3</button>
                            <button class="px-3 py-1 border rounded text-sm hover:bg-gray-50">Next →</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Users Growth Chart - Line
            const usersCtx = document.getElementById('usersGrowthChart');
            if (usersCtx) {
                new Chart(usersCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Users',
                            data: [1800, 1900, 2000, 2100, 2200, 2300],
                            borderColor: 'rgba(34,197,94,0.9)',
                            backgroundColor: 'rgba(34,197,94,0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true,
                            pointBackgroundColor: '#10B981',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2,
                            pointRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 1700,
                                grid: {
                                    color: 'rgba(0,0,0,0.05)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Status Distribution Chart - Small Doughnut
            const statusCtx = document.getElementById('statusDistributionChart');
            if (statusCtx) {
                new Chart(statusCtx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Active', 'Inactive', 'Pending'],
                        datasets: [{
                            data: [2000, 500, 347],
                            backgroundColor: ['#10B981', '#EF4444', '#F59E0B'],
                            borderWidth: 1,
                            borderColor: '#ffffff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        cutout: '70%',
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            // Weekly Logins Chart - Bar
            const weeklyCtx = document.getElementById('weeklyLoginsChart');
            if (weeklyCtx) {
                new Chart(weeklyCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Logins',
                            data: [320, 298, 315, 287, 301, 265, 280],
                            backgroundColor: 'rgba(59,130,246,0.8)',
                            borderColor: 'rgba(59,130,246,1)',
                            borderWidth: 1,
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0,0,0,0.05)'
                                },
                                ticks: {
                                    stepSize: 100
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Page Views Chart - Horizontal Bar
            const pageCtx = document.getElementById('pageViewsChart');
            if (pageCtx) {
                new Chart(pageCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['Dashboard', 'Users', 'Analytics', 'Settings', 'Files'],
                        datasets: [{
                            label: 'Views',
                            data: [1240, 980, 780, 650, 420],
                            backgroundColor: 'rgba(139,92,246,0.8)',
                            borderColor: 'rgba(139,92,246,1)',
                            borderWidth: 1,
                            borderRadius: 4
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0,0,0,0.05)'
                                }
                            },
                            y: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>